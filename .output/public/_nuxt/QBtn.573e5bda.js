import{K as F,bb as G,z as I,bc as N,r as T,c as s,a5 as i,A as _,B as X,ay as H,b as J,e as a,ac as w,aj as V,bd as W,a1 as Y,aU as Z,ae as ee,G as te}from"./entry.c1a61000.js";const{passiveCapture:l}=te;let c=null,v=null,d=null;const ue=F({name:"QBtn",props:{...G,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array],unelevated:{type:Boolean,default:!0}},emits:["click","keydown","mousedown","keyup"],setup(n,{slots:k,emit:b}){const{proxy:E}=I(),{classes:P,style:C,innerClasses:x,attributes:B,hasLink:R,linkTag:K,navigateOnClick:M,isActionable:A}=N(n),t=T(null),L=T(null);let o=null,y,h=null;const p=s(()=>n.label!==void 0&&n.label!==null&&n.label!==""),S=s(()=>n.disable===!0||n.ripple===!1?!1:{keyCodes:R.value===!0?[13,32]:[13],...n.ripple===!0?{}:n.ripple}),O=s(()=>({center:n.round})),$=s(()=>{const e=Math.max(0,Math.min(100,n.percentage));return e>0?{transition:"transform 0.6s",transform:`translateX(${e-100}%)`}:{}}),j=s(()=>{if(n.loading===!0)return{onMousedown:m,onTouchstart:m,onClick:m,onKeydown:m,onKeyup:m};if(A.value===!0){const e={onClick:q,onKeydown:U,onMousedown:D};if(E.$q.platform.has.touch===!0){const u=n.onTouchstart!==void 0?"":"Passive";e[`onTouchstart${u}`]=z}return e}return{onClick:i}}),Q=s(()=>({ref:t,class:"q-btn q-btn-item non-selectable no-outline "+P.value,style:C.value,...B.value,...j.value}));function q(e){if(t.value!==null){if(e!==void 0){if(e.defaultPrevented===!0)return;const u=document.activeElement;if(n.type==="submit"&&u!==document.body&&t.value.contains(u)===!1&&u.contains(t.value)===!1){t.value.focus();const g=()=>{document.removeEventListener("keydown",i,!0),document.removeEventListener("keyup",g,l),t.value!==null&&t.value.removeEventListener("blur",g,l)};document.addEventListener("keydown",i,!0),document.addEventListener("keyup",g,l),t.value.addEventListener("blur",g,l)}}M(e)}}function U(e){t.value!==null&&(b("keydown",e),_(e,[13,32])===!0&&v!==t.value&&(v!==null&&f(),e.defaultPrevented!==!0&&(t.value.focus(),v=t.value,t.value.classList.add("q-btn--active"),document.addEventListener("keyup",r,!0),t.value.addEventListener("blur",r,l)),i(e)))}function z(e){t.value!==null&&(b("touchstart",e),e.defaultPrevented!==!0&&(c!==t.value&&(c!==null&&f(),c=t.value,o=e.target,o.addEventListener("touchcancel",r,l),o.addEventListener("touchend",r,l)),y=!0,h!==null&&clearTimeout(h),h=setTimeout(()=>{h=null,y=!1},200)))}function D(e){t.value!==null&&(e.qSkipRipple=y===!0,b("mousedown",e),e.defaultPrevented!==!0&&d!==t.value&&(d!==null&&f(),d=t.value,t.value.classList.add("q-btn--active"),document.addEventListener("mouseup",r,l)))}function r(e){if(t.value!==null&&!(e!==void 0&&e.type==="blur"&&document.activeElement===t.value)){if(e!==void 0&&e.type==="keyup"){if(v===t.value&&_(e,[13,32])===!0){const u=new MouseEvent("click",e);u.qKeyEvent=!0,e.defaultPrevented===!0&&X(u),e.cancelBubble===!0&&H(u),t.value.dispatchEvent(u),i(e),e.qKeyEvent=!0}b("keyup",e)}f()}}function f(e){const u=L.value;e!==!0&&(c===t.value||d===t.value)&&u!==null&&u!==document.activeElement&&(u.setAttribute("tabindex",-1),u.focus()),c===t.value&&(o!==null&&(o.removeEventListener("touchcancel",r,l),o.removeEventListener("touchend",r,l)),c=o=null),d===t.value&&(document.removeEventListener("mouseup",r,l),d=null),v===t.value&&(document.removeEventListener("keyup",r,!0),t.value!==null&&t.value.removeEventListener("blur",r,l),v=null),t.value!==null&&t.value.classList.remove("q-btn--active")}function m(e){i(e),e.qSkipRipple=!0}return J(()=>{f(!0)}),Object.assign(E,{click:q}),()=>{let e=[];n.icon!==void 0&&e.push(a(w,{name:n.icon,left:n.stack===!1&&p.value===!0,role:"img","aria-hidden":"true"})),p.value===!0&&e.push(a("span",{class:"block"},[n.label])),e=V(k.default,e),n.iconRight!==void 0&&n.round===!1&&e.push(a(w,{name:n.iconRight,right:n.stack===!1&&p.value===!0,role:"img","aria-hidden":"true"}));const u=[a("span",{class:"q-focus-helper",ref:L})];return n.loading===!0&&n.percentage!==void 0&&u.push(a("span",{class:"q-btn__progress absolute-full overflow-hidden"+(n.darkPercentage===!0?" q-btn__progress--dark":"")},[a("span",{class:"q-btn__progress-indicator fit block",style:$.value})])),u.push(a("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+x.value},e)),n.loading!==null&&u.push(a(Y,{name:"q-transition--fade"},()=>n.loading===!0?[a("span",{key:"loading",class:"absolute-full flex flex-center"},k.loading!==void 0?k.loading():[a(W)])]:null)),Z(a(K.value,Q.value,u),[[ee,S.value,void 0,O.value]])}}});export{ue as _};
